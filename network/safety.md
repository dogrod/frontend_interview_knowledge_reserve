# Network Safety

- Q: 什么是 `XSS` 攻击？如何预防？

  A:

  `XSS` 的全称是 Cross Site Scripting，跨站点脚本。

  原理：

  非持久性XSS攻击：非持久型xss攻击要求用户访问一个被攻击者篡改后的链接，用户访问该链接时，被植入的攻击脚本被用户游览器执行，从而达到攻击目的。

  持久性XSS攻击：用户提交到后端的数据中包含恶意JavaScript代码（比如`<script>`标签），而应用在读取数据后将未转义的恶意代码输出到第三方浏览器解释执行，导致了恶意代码的执行。

  防御：

  1. 对用户输入的数据进行转码
  2. 过滤用户上传数据中的特定DOM属性

- Q: 什么是 `CSRF` 攻击？如何预防？(头条/阿里国际UED)

  A:

  `CSRF` 的全称是 Cross Site Request Forgery，跨站点请求伪造。

  原理：
  攻击者诱导受害者进入第三方网站，在第三方网站中，向被攻击的网站发送跨站请求。利用受害者在被攻击网站已经获取的凭证，绕过后台的用户信息校验，达到冒充用户对被攻击的网站发起恶意请求的目的。

  例子：

  - Gmail CSRF 安全漏洞：攻击者向受害者的Gmail中发送邮件，诱导受害者打开恶意网站，并在恶意网站中跨站点的向Gmail服务器发送设置过滤器的请求，将受害者的邮件自动转发至攻击者的邮箱，由于受害者已登陆Gmail，所以请求发送时，已携带受害者的信息凭证（cookie），所以Gmail接受了这次请求。而后攻击者可以随意查看受害者的邮件，包括验证码等隐私信息，从而对受害者的数据进行恶意操作。

  常见类型：

  - GET 型：通过发起一个简单的的HTTP请求达到目的。例如图片的 `src` 属性
  - POST 型：通过一个自动提交的表单来达到目的。例如在页面中添加一个 `form` 表单，并在 `script` 中执行 `document.forms[0].submit()`
  - 链接类型：诱导用户点击链接后，发起恶意请求。例如在论坛的图片或网站的广告中植入恶意链接。

  特点：

  1. 通常是在第三方网站发起的恶意请求
  2. 通常利用受害者在被攻击网站的登陆凭证，冒充受害者提交操作，而不是直接窃取数据
  3. 整个过程并不能获取到受害者的登陆凭证，仅仅是冒用

  防御：

  1. 服务端利用 `header` 中的字段过滤不可信的网站，或直接开启白名单
  2. 使用 `CSRF Token` 进行判断是否授权的网站
  3. 服务端设置 `X-Frame-Options` 为 `SAMEORIGIN`，仅允许同源情况下使用 iFrame 访问

  参考：
  - [【基本功】 前端安全系列之二：如何防止CSRF攻击？](https://zhuanlan.zhihu.com/p/46592479)
